function n() { wx.getNetworkType({ success: function (n) { d.networkType = n.networkType } }) } function o() { wx.getSystemInfo({ success: function (n) { d.systemInfo = n } }) } function e() { wx.getLocation({ type: "wgs84", success: function (n) { d.locationInfo = n } }) } function t() { wx.getUserInfo({ success: function (n) { d.userInfo = n.userInfo } }) } function i() { var n = getCurrentPages(); if (n.length) { return n[n.length - 1] } } function r(n, o, e) { var t = n[o]; n[o] = function (n) { t && t.call(this, n), e.call(this, n) } } function s(n) { w.push(n), w.length > 20 && w.shift() } function u(i) { var r = { type: "function", time: l(), belong: "App", method: "onLaunch", path: i.path, query: i.query, scene: i.scene }; n(), m.setSystemInfo && o(), m.setLocation && e(), m.setUserInfo && t(), s(r) } function a(n) { d.scene = n.scene; var o = { type: "function", time: l(), belong: "App", method: "onShow", path: n.path, query: n.query, scene: n.scene }; s(o) } function c() { var n = { type: "function", time: l(), belong: "App", method: "onHide", route: v.route, options: v.options }; s(n) } function f(n) { return function () { "onLoad" !== n && "onShow" !== n || (v = i()); var o = { type: "function", time: l(), belong: "Page", method: n, route: v && v.route, options: v && v.options }; s(o) } } function p(n, o) { var e = { type: "function", time: l(), belong: "Page", method: n, route: v && v.route, options: v && v.options }; m.monitorMethodArguments && (e.args = o), h(n) && s(e) } function h(n) { var o = m.methodWhitelist, e = m.methodBlacklist; return "onPageScroll" !== n && (o && o.length ? Boolean(o.includes(n)) : !e || !e.length || Boolean(!e.includes(n))) } function l() { return (new Date).getTime() } var m = { silent: !1 }, y = 5, g = "0.1.0", d = { notifierVersion: g }, w = []; m.notifyError = function (n) { if (m.apikey && n && y && !m.silent) { y-- , d.apikey = m.apikey, d.releaseStage = m.releaseStage || "production", d.appVersion = m.appVersion, d.metaData = m.metaData, m.systemInfo && (d.systemInfo = m.systemInfo), m.userInfo && (d.userInfo = m.userInfo), d.breadcrumbs = w, d.error = n, d.time = l(); wx.request({ url: "https://fundebug.com/wxjs/", method: "POST", data: d }) } }; var I = { onLaunch: u, onShow: a, onHide: c, onError: m.notifyError }, S = App; App = function (n) { Object.keys(I).forEach(function (o) { r(n, o, I[o]) }), S(n) }; var v = {}, b = { onLoad: f("onLoad"), onShow: f("onShow"), onReady: f("onReady"), onHide: f("onHide"), onUnload: f("onUnload"), onPullDownRefresh: f("onPullDownRefresh"), onReachBottom: f("onReachBottom"), onShareAppMessage: f("onShareAppMessage") }, k = Page; Page = function (n) { Object.keys(b).forEach(function (o) { r(n, o, b[o]) }), m.monitorMethodCall && Object.keys(n).forEach(function (o) { if ("function" == typeof n[o] && !b[o]) { var e = n[o]; n[o] = function () { return p(o, arguments), e && e.apply(this, arguments) } } }), k(n) }, module.exports = m;